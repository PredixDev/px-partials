<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="px-icon.html"/>


<!--
A simple web components for creating PX Design System buttons.
```
<px-button label="Button" size="small"></px-button>
<px-button label="Button" size="regular" theme="primary" icon="fa fa-home"></px-button>
<px-button label="Button" size="large" theme="tertiary" icon="fa fa-home"></px-button>
<px-button label="Button" size="huge" theme="disabled" icon="fa fa-home"></px-button>
```
@element px-button
@blurb Element for creating buttons.
@demo demo/demo-px-button.html
@homepage index.html
-->
<dom-module id="px-button">

	<template strip-whitespace>
		<button id="btn" type="button" class="btn" on-tap="_clickHandler" on-click="_clickHandler">
			<template is="dom-if" if="{{icon}}">
				<px-icon id="ico" icon$="{{icon}}" size$="{{iconSize}}"></px-icon>
			</template>

			<template is="dom-if" if="{{label}}">
				<span>{{label}}</span>
			</template>
			<content select="*"></content>
		</button>
	</template>
	<script type="text/javascript">
		Polymer({
			is: "px-button",
			properties: {
				//The button label
				label: {
					type: String
				},
				//The button theme
				theme: {
					type: String
				},
				//The class name for the icon
				icon: {
					type: String
				},
				//The size for the icon
				iconSize: {
					type: String
				},
				//The icon size
				size: {
					type: String
				}
			},
			attached: function () {
				var self = this;
				this.async(function () {
					if (self.theme) {
						var themes = self.theme.split(' ');
						themes.forEach(function (t) {
							console.log('this.$', self.$.btn);
							console.log('theme', t);
							self.toggleClass('btn--' + t, true, self.$.btn);
						});
					}
					if (self.size) {
						self.toggleClass('btn--' + self.size, true, self.$.btn);
					}

					if (self.icon) {
						console.log('this.$', self.$.ico);
						var ico = self.queryEffectiveChildren('px-icon');
						if (ico) {
							ico.icon = self.icon;
							ico.size = self.iconSize;
						}

					}
				})
			},
			_clickHandler: function (e) {
				this.fire('click', e);
			}
		});
	</script>
</dom-module>
